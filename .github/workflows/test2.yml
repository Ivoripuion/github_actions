name: Run Command on Self-Hosted Runner

on:
  workflow_dispatch:
    inputs:
      command:
        description: 'Command to execute on the self-hosted runner'
        required: true
        default: 'echo Hello, World!'

jobs:
  run-command:
    runs-on: [self-hosted,bsrc]  # å…³é”®ï¼šä½¿ç”¨è‡ªæ‰˜ç®¡è¿è¡Œå™¨

    steps:
      - name: ðŸ”§ Run User-Specified Command
        id: run_cmd
        run: |
          echo "ðŸ”¹ Running command: ${{ github.event.inputs.command }}"
          OUTPUT=$(${{ github.event.inputs.command }} 2>&1)
          echo "âœ… Command executed successfully."
          echo "ðŸ“‹ Output:"
          echo "$OUTPUT"
          echo "OUTPUT<<EOF" >> $GITHUB_ENV
          echo "$OUTPUT" >> $GITHUB_ENV
          echo "EOF" >> $GITHUB_ENV
      - name: ðŸ“¤ Show Output in Summary
        run: |
          echo "### Command: \`\`\`${{ github.event.inputs.command }}\`\`\`" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "#### Output:" >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
          echo "${{ env.OUTPUT }}" >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
